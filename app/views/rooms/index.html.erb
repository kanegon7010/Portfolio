<div class="max-w-2xl md:w-3/4 py-4 mx-2">
  <div class="px-4 my-4 font-medium">DM</div>
  <% @others.each do |other| %>
    <%= link_to room_path(other.room_id ) do %>
      <div class="bg-white flex items-center p-2 rounded-xl shadow border">
        <div class="flex items-center space-x-4">
          <% if other.user.avatar? %>
            <%= image_tag other.user.avatar.thumb50.url, class: "w-16 h-16 rounded-full" %>
          <% else %>
            <%= image_tag "/assets/default.png", :size => '100x100', class: "w-16 h-16 rounded-full border border-gray-400" %>
          <% end %>
        </div>
        <div class="flex-grow p-3">
          <div class="font-semibold text-gray-700">
            <%= other.user.username %>
          </div>
          <div class="text-sm text-gray-500">
            <% last_message = Message.where(room_id: other.room_id, user_id: other.user_id).or(Message.where(room_id: other.room_id, user_id: current_user.id)).last %>
            <% if last_message.user_id == current_user.id %>
              <% last_message = 'You :  ' + last_message.message %>
            <% else %>
              <% last_message = other.user.username + ' :  ' + last_message.message %>
            <% end %>
            <% last_message = last_message[0..40] + '...' if last_message.length > 40 %>
            <%= last_message %>
          </div>
        </div>
      </div>
    <% end %>
  <% end %>
</div>